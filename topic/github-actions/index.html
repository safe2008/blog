<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Github Actions(CI/CD) tricks that official documents didn't mention. This post including hints, tips, snippet, cheatsheet, troubleshooting, notes, how-to."><link href=https://safe2008.github.io/blog/topic/github-actions/ rel=canonical><meta name=author content=Safe2008><link rel="shortcut icon" href=../../assets/images/favicon.png><meta name=generator content="mkdocs-1.1, mkdocs-material-5.1.6"><title>Github Action - Blog</title><link rel=stylesheet href=../../assets/stylesheets/main.4b9ffd7b.min.css><link href=https://fonts.gstatic.com rel=preconnect crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style><link rel="preconnect dns-prefetch" href=https://www.google-analytics.com><script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-30929083-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){if(this.value){var e=document.location.pathname;ga("send","pageview",e+"?q="+this.value)}})}),document.addEventListener("DOMContentSwitch",function(){ga("send","pageview")})</script><script async src=https://www.google-analytics.com/analytics.js></script></head> <body dir=ltr> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#github-action class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header-nav md-grid" aria-label=Header> <a href=https://safe2008.github.io/blog title=Blog class="md-header-nav__button md-logo" aria-label=Blog> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><path d="M502.63 214.63l-45.25-45.25c-6-6-14.14-9.37-22.63-9.37H384V80c0-26.51-21.49-48-48-48H176c-26.51 0-48 21.49-48 48v80H77.25c-8.49 0-16.62 3.37-22.63 9.37L9.37 214.63c-6 6-9.37 14.14-9.37 22.63V320h128v-16c0-8.84 7.16-16 16-16h32c8.84 0 16 7.16 16 16v16h128v-16c0-8.84 7.16-16 16-16h32c8.84 0 16 7.16 16 16v16h128v-82.75c0-8.48-3.37-16.62-9.37-22.62zM320 160H192V96h128v64zm64 208c0 8.84-7.16 16-16 16h-32c-8.84 0-16-7.16-16-16v-16H192v16c0 8.84-7.16 16-16 16h-32c-8.84 0-16-7.16-16-16v-16H0v96c0 17.67 14.33 32 32 32h448c17.67 0 32-14.33 32-32v-96H384v16z"/></svg> </a> <label class="md-header-nav__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header-nav__title data-md-component=header-title> <div class=md-header-nav__ellipsis> <span class="md-header-nav__topic md-ellipsis"> Blog </span> <span class="md-header-nav__topic md-ellipsis"> Github Action </span> </div> </div> <label class="md-header-nav__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query data-md-state=active> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <button type=reset class="md-search__icon md-icon" aria-label=Clear data-md-component=search-reset tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header-nav__source> <a href=https://github.com/safe2008/blog/ title="Go to repository" class=md-source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=https://safe2008.github.io/blog title=Blog class="md-nav__button md-logo" aria-label=Blog> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><path d="M502.63 214.63l-45.25-45.25c-6-6-14.14-9.37-22.63-9.37H384V80c0-26.51-21.49-48-48-48H176c-26.51 0-48 21.49-48 48v80H77.25c-8.49 0-16.62 3.37-22.63 9.37L9.37 214.63c-6 6-9.37 14.14-9.37 22.63V320h128v-16c0-8.84 7.16-16 16-16h32c8.84 0 16 7.16 16 16v16h128v-16c0-8.84 7.16-16 16-16h32c8.84 0 16 7.16 16 16v16h128v-82.75c0-8.48-3.37-16.62-9.37-22.62zM320 160H192V96h128v64zm64 208c0 8.84-7.16 16-16 16h-32c-8.84 0-16-7.16-16-16v-16H192v16c0 8.84-7.16 16-16 16h-32c-8.84 0-16-7.16-16-16v-16H0v96c0 17.67 14.33 32 32 32h448c17.67 0 32-14.33 32-32v-96H384v16z"/></svg> </a> Blog </label> <div class=md-nav__source> <a href=https://github.com/safe2008/blog/ title="Go to repository" class=md-source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. title="ðŸ‘‹ Hello World" class=md-nav__link> ðŸ‘‹ Hello World </a> </li> <li class=md-nav__item> <a href=../../help/ title="ðŸŒˆ Help" class=md-nav__link> ðŸŒˆ Help </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3 type=checkbox id=nav-3 checked> <label class=md-nav__link for=nav-3> Topic <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Topic data-md-level=1> <label class=md-nav__title for=nav-3> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Topic </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Github Action <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg> </span> </label> <a href=./ title="Github Action" class="md-nav__link md-nav__link--active"> Github Action </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Table of contents </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#github-actions-an-overview class=md-nav__link> Github Actions: an overview </a> </li> <li class=md-nav__item> <a href=#adding-a-workflow-file class=md-nav__link> Adding a workflow file </a> </li> <li class=md-nav__item> <a href=#events class=md-nav__link> Events </a> <nav class=md-nav aria-label=Events> <ul class=md-nav__list> <li class=md-nav__item> <a href=#scheduled-events class=md-nav__link> Scheduled events </a> </li> <li class=md-nav__item> <a href=#manual-start-workflow_dispatch class=md-nav__link> Manual start - workflow_dispatch </a> </li> <li class=md-nav__item> <a href=#webhooks-create class=md-nav__link> Webhooks: create </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#environment-variables class=md-nav__link> Environment variables </a> </li> <li class=md-nav__item> <a href=#secrets class=md-nav__link> Secrets </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Table of contents </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#github-actions-an-overview class=md-nav__link> Github Actions: an overview </a> </li> <li class=md-nav__item> <a href=#adding-a-workflow-file class=md-nav__link> Adding a workflow file </a> </li> <li class=md-nav__item> <a href=#events class=md-nav__link> Events </a> <nav class=md-nav aria-label=Events> <ul class=md-nav__list> <li class=md-nav__item> <a href=#scheduled-events class=md-nav__link> Scheduled events </a> </li> <li class=md-nav__item> <a href=#manual-start-workflow_dispatch class=md-nav__link> Manual start - workflow_dispatch </a> </li> <li class=md-nav__item> <a href=#webhooks-create class=md-nav__link> Webhooks: create </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#environment-variables class=md-nav__link> Environment variables </a> </li> <li class=md-nav__item> <a href=#secrets class=md-nav__link> Secrets </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content> <article class="md-content__inner md-typeset"> <a href=https://github.com/safe2008/blog/edit/master/docs/topic/github-actions.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg> </a> <h1 id=github-action>Github Action<a class=headerlink href=#github-action title="Permanent link">&para;</a></h1> <p>Github Actions(CI/CD) tricks that official documents didn't mention. This post including hints, tips, snippet, cheatsheet, troubleshooting, notes, how-to.</p> <h2 id=github-actions-an-overview>Github Actions: an overview<a class=headerlink href=#github-actions-an-overview title="Permanent link">&para;</a></h2> <p>In Actions, the build occurs as follows (see Introduction to GitHub Actions ):</p> <ul> <li>event (for example, a pull request or a commit to the repository, see the list here &gt;&gt;&gt; ) triggers the start of the workflow , and the workflow contains jobs</li> <li>job contains a list of steps , and each step contains one or more actions</li> <li>actions are executed on the same runner , and several such actions can be executed within the same workflow at the same time</li> </ul> <p>Main components:</p> <ul> <li>runner : the Github or self-hosted server that runs the job</li> <li>workflow : a described procedure that includes one or more jobs that is triggered by some event</li> <li>jobs : a set of steps that run on the same runner. If there are several jobs in one workflow, by default they are launched in parallel, but they can be configured to be executed in turn and depend on the results of each other's execution.</li> <li>steps : a task that executes commands or actions. Since steps in one job are performed on one runner, they can exchange data with each other.</li> <li>actions : main "executable blocks" - can represent a set of ready-made tasks, or execute ordinary commands</li> </ul> <h2 id=adding-a-workflow-file>Adding a workflow file<a class=headerlink href=#adding-a-workflow-file title="Permanent link">&para;</a></h2> <div class=highlight><pre><span></span><code>mkdir -p .github / workflows
</code></pre></div> <div class=highlight><pre><span></span><code><span class=nt>name</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">actions-test</span>
<span class=nt>on</span><span class=p>:</span> <span class="p p-Indicator">[</span><span class=nv>push</span><span class="p p-Indicator">]</span>
<span class=nt>jobs</span><span class=p>:</span>
  <span class=nt>print-hello</span><span class=p>:</span>
    <span class=nt>runs-on</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">ubuntu-latest</span>
    <span class=nt>steps</span><span class=p>:</span>
      <span class="p p-Indicator">-</span> <span class=nt>run</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">echo &quot;Hello, world&quot;</span>
</code></pre></div> <h2 id=events>Events<a class=headerlink href=#events title="Permanent link">&para;</a></h2> <p>In Events, you can describe rather complex conditions, according to which you will make a decision on the execution of a workflow.</p> <div class=highlight><pre><span></span><code><span class=nt>name</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">actions-test</span>
<span class=nt>on</span><span class=p>:</span> 
  <span class=nt>push</span><span class=p>:</span>
    <span class=nt>branches</span><span class=p>:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">master</span>
  <span class=nt>pull_request</span><span class=p>:</span>
    <span class=nt>branches</span><span class=p>:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">test-branch</span>
</code></pre></div> <h3 id=scheduled-events>Scheduled events<a class=headerlink href=#scheduled-events title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=nt>name</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">actions-test</span>
<span class=nt>on</span><span class=p>:</span> 
  <span class=nt>schedule</span><span class=p>:</span>
    <span class="p p-Indicator">-</span> <span class=nt>cron</span><span class=p>:</span> <span class=s>&#39;*</span><span class=nv> </span><span class=s>*</span><span class=nv> </span><span class=s>*</span><span class=nv> </span><span class=s>*&#39;</span>
</code></pre></div> <h3 id=manual-start-workflow_dispatch>Manual start - workflow_dispatch<a class=headerlink href=#manual-start-workflow_dispatch title="Permanent link">&para;</a></h3> <p><div class=highlight><pre><span></span><code><span class=nt>name</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">actions-test</span>
<span class=nt>on</span><span class=p>:</span> 
   <span class="l l-Scalar l-Scalar-Plain">workflow_dispatch</span>
<span class=nt>jobs</span><span class=p>:</span>
  <span class=nt>print-hello</span><span class=p>:</span>
    <span class=nt>runs-on</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">ubuntu-latest</span>
    <span class=nt>steps</span><span class=p>:</span>
      <span class="p p-Indicator">-</span> <span class=nt>run</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">echo &quot;Hello, world&quot;</span>
</code></pre></div> After that, a button will appear in Actions to start with a choice of a branch:</p> <p><img alt=workflow_dispatch src=../images/workflow_dispatch.png></p> <p>In addition, a set of input data can be added here, using inputswhich at runtime will be saved in the context github.eventand available as variables: <img alt src=images/github.event.inputs.username> <div class=highlight><pre><span></span><code><span class=nt>name</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">actions-test</span>
<span class=nt>on</span><span class=p>:</span> 
   <span class=nt>workflow_dispatch</span><span class=p>:</span>
     <span class=nt>inputs</span><span class=p>:</span>
       <span class=nt>userName</span><span class=p>:</span>
         <span class=nt>description</span><span class=p>:</span> <span class=s>&quot;Username&quot;</span>
         <span class=nt>required</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
         <span class=nt>default</span><span class=p>:</span> <span class=s>&quot;test&quot;</span>
<span class=nt>jobs</span><span class=p>:</span>
  <span class=nt>print-hello</span><span class=p>:</span>
    <span class=nt>runs-on</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">ubuntu-latest</span>
    <span class=nt>steps</span><span class=p>:</span>
      <span class="p p-Indicator">-</span> <span class=nt>run</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">echo &quot;Username</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">$ {{github.event.inputs.username}}&quot;</span>
      <span class="p p-Indicator">-</span> <span class=nt>run</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">echo &quot;Actor&#39;s username</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">$ {{github.actor}}&quot;</span>
</code></pre></div></p> <h3 id=webhooks-create>Webhooks: create<a class=headerlink href=#webhooks-create title="Permanent link">&para;</a></h3> <p>In addition pushto the one we have already used, you can configure the start of the workflow for any event in the repository.</p> <div class=highlight><pre><span></span><code><span class=nt>name</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">actions-test</span>
<span class=nt>on</span><span class=p>:</span> 
  <span class="l l-Scalar l-Scalar-Plain">create</span>
<span class=nt>jobs</span><span class=p>:</span>
  <span class=nt>print-hello</span><span class=p>:</span>
    <span class=nt>runs-on</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">ubuntu-latest</span>
    <span class=nt>steps</span><span class=p>:</span>
      <span class="p p-Indicator">-</span> <span class=nt>run</span><span class=p>:</span> <span class="p p-Indicator">|</span>
          <span class=no>echo &quot;Event name: $ {{github.event_name}}&quot;</span>
          <span class=no>echo &quot;Actor&#39;s username: $ {{github.actor}}&quot;</span>
</code></pre></div> <h2 id=environment-variables>Environment variables<a class=headerlink href=#environment-variables title="Permanent link">&para;</a></h2> <p>Also, Github Actions supports working with environment variables.</p> <p><div class=highlight><pre><span></span><code><span class=nt>name</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">vars-test</span>

<span class=nt>on</span><span class=p>:</span>
  <span class="l l-Scalar l-Scalar-Plain">push</span>

<span class=nt>env</span><span class=p>:</span>
  <span class=nt>VAR_NAME</span><span class=p>:</span> <span class=s>&quot;Global</span><span class=nv> </span><span class=s>value&quot;</span>

<span class=nt>jobs</span><span class=p>:</span>
  <span class=nt>print-vars</span><span class=p>:</span>
    <span class=nt>runs-on</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">ubuntu-latest</span>
    <span class=nt>steps</span><span class=p>:</span>

      <span class=c1># using own varibales</span>
      <span class="p p-Indicator">-</span> <span class=nt>name</span><span class=p>:</span> <span class=s>&quot;Test</span><span class=nv> </span><span class=s>global</span><span class=nv> </span><span class=s>var</span><span class=nv> </span><span class=s>as</span><span class=nv> </span><span class=s>$VAR_NAME&quot;</span>
        <span class=nt>run</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">echo &quot;Test value $VAR_NAME&quot;</span>

      <span class="p p-Indicator">-</span> <span class=nt>name</span><span class=p>:</span> <span class=s>&quot;Test</span><span class=nv> </span><span class=s>global</span><span class=nv> </span><span class=s>var</span><span class=nv> </span><span class=s>as</span><span class=nv> </span><span class=s>${{</span><span class=nv> </span><span class=s>env.VAR_NAME</span><span class=nv> </span><span class=s>}}&quot;</span>
        <span class=nt>run</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">echo &quot;Test value ${{ env.VAR_NAME }}&quot;</span>

      <span class=c1># using default variables</span>
      <span class="p p-Indicator">-</span> <span class=nt>name</span><span class=p>:</span> <span class=s>&quot;Test</span><span class=nv> </span><span class=s>job</span><span class=nv> </span><span class=s>var</span><span class=nv> </span><span class=s>as</span><span class=nv> </span><span class=s>$GITHUB_REPOSITORY&quot;</span>
        <span class=nt>run</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">echo &quot;Test value $GITHUB_REPOSITORY&quot;</span>

      <span class=c1># this will be empty, as default variables are not in the context</span>
      <span class="p p-Indicator">-</span> <span class=nt>name</span><span class=p>:</span> <span class=s>&quot;Test</span><span class=nv> </span><span class=s>job</span><span class=nv> </span><span class=s>var</span><span class=nv> </span><span class=s>as</span><span class=nv> </span><span class=s>${{</span><span class=nv> </span><span class=s>env.GITHUB_REPOSITORY</span><span class=nv> </span><span class=s>}}&quot;</span>
        <span class=nt>run</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">echo &quot;Test value ${{ env.GITHUB_REPOSITORY }}&quot;</span>

      <span class=c1># using &#39;dynamic&#39; variables</span>
      <span class="p p-Indicator">-</span> <span class=nt>name</span><span class=p>:</span> <span class=s>&quot;Set</span><span class=nv> </span><span class=s>local</span><span class=nv> </span><span class=s>var&quot;</span>
        <span class=nt>run</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">echo &quot;local_var=local value&quot; &gt;&gt; $GITHUB_ENV</span>

      <span class="p p-Indicator">-</span> <span class=nt>name</span><span class=p>:</span> <span class=s>&quot;Print</span><span class=nv> </span><span class=s>local</span><span class=nv> </span><span class=s>var</span><span class=nv> </span><span class=s>as</span><span class=nv> </span><span class=s>$local_var&quot;</span>
        <span class=nt>run</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">echo &quot;$local_var&quot;</span>

      <span class="p p-Indicator">-</span> <span class=nt>name</span><span class=p>:</span> <span class=s>&quot;Print</span><span class=nv> </span><span class=s>local</span><span class=nv> </span><span class=s>var</span><span class=nv> </span><span class=s>as</span><span class=nv> </span><span class=s>${{</span><span class=nv> </span><span class=s>env.local_var</span><span class=nv> </span><span class=s>}}&quot;</span>
        <span class=nt>run</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">echo &quot;${{ env.local_var }}&quot;</span>
</code></pre></div> And the result:</p> <p><img alt=environment src=../images/environment.png></p> <h2 id=secrets>Secrets<a class=headerlink href=#secrets title="Permanent link">&para;</a></h2> <p>Secrets are added in repository settings&gt; Secrets:</p> <p><img alt=secret src=../images/secret.png></p> <div class=highlight><pre><span></span><code><span class=nt>name</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">actions-test</span>

<span class=nt>on</span><span class=p>:</span> 
  <span class="l l-Scalar l-Scalar-Plain">push</span>

<span class=nt>env</span><span class=p>:</span>
  <span class=nt>TEST_ENV</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">${{ secrets.TEST_SECRET }}</span>

<span class=nt>jobs</span><span class=p>:</span>
  <span class=nt>print-hello</span><span class=p>:</span>
    <span class=nt>runs-on</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">ubuntu-latest</span>
    <span class=nt>steps</span><span class=p>:</span>
      <span class="p p-Indicator">-</span> <span class=nt>run</span><span class=p>:</span> <span class="p p-Indicator">|</span>
          <span class=no>echo &quot;Test secret: ${{ secrets.TEST_SECRET }}&quot;</span>
          <span class=no>echo &quot;Test secret: ${{ env.TEST_ENV }}&quot;</span>
</code></pre></div> <p>Run:</p> <p><img alt=run-secret src=../images/run-secret.png></p> <hr> <div class=md-source-date> <small> Last update: <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">August 17, 2021</span> </small> </div> <h2 id=__comments>Comments</h2> <div id=disqus_thread></div> <script>var disqus_config=function(){this.page.url="https://safe2008.github.io/blog/topic/github-actions/",this.page.identifier="/topic/github-actions/"};!function(){var e=document,i=e.createElement("script");i.src="//https-safe2008-github-io-my-material.disqus.com/embed.js",i.setAttribute("data-timestamp",+new Date),(e.head||e.body).appendChild(i)}()</script> </article> </div> </div> </main> <footer class=md-footer> <div class=md-footer-nav> <nav class="md-footer-nav__inner md-grid" aria-label=Footer> <a href=../../help/ title="ðŸŒˆ Help" class="md-footer-nav__link md-footer-nav__link--prev" rel=prev> <div class="md-footer-nav__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </div> <div class=md-footer-nav__title> <div class=md-ellipsis> <span class=md-footer-nav__direction> Previous </span> ðŸŒˆ Help </div> </div> </a> </nav> </div> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> <a href=http://creativecommons.org/licenses/by-nc-nd/4.0/ rel=license><img alt="Creative Commons License" style=border-width:0 src=https://i.creativecommons.org/l/by-nc-nd/4.0/88x31.png></a> <br> Copyright Â© 2021- Safe2008 </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-footer-social> <a href=https://github.com/safe2008 target=_blank rel=noopener title=github.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 480 512"><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg> </a> <a href=https://www.linkedin.com/in/boriphuth-saensukphattraka target=_blank rel=noopener title=www.linkedin.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg> </a> </div> </div> </div> </footer> </div> <script src=../../assets/javascripts/vendor.a0c4167b.min.js></script> <script src=../../assets/javascripts/bundle.fb26dd1d.min.js></script><script id=__lang type=application/json>{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script> <script>
        app = initialize({
          base: "../..",
          features: [],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.37585f48.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script> </body> </html>